# מדריך הרצת בדיקות - Basketball Training Management System

## סקירה כללית
המערכת כוללת שני סוגי בדיקות:
1. **בדיקות אוטומטיות (Espresso Tests)** - בדיקות UI אוטומטיות
2. **בדיקות ידניות (Manual Tests)** - תסריטי בדיקה מפורטים

---

## 1. בדיקות אוטומטיות (Espresso Tests)

### קבצי הבדיקות
הבדיקות נמצאות בתיקייה:
```
app/src/androidTest/java/com/example/testapp/
```

**קבצים:**
- `NavigationTests.java` - בדיקות ניווט בין מסכים
- `TeamsFragmentTests.java` - בדיקות פיצ'ר הקבוצות
- `CourtsFragmentTests.java` - בדיקות פיצ'ר המגרשים
- `ScheduleFragmentTests.java` - בדיקות פיצ'ר האימונים

---

### איך להריץ את הבדיקות האוטומטיות?

#### דרך 1: Android Studio (מומלץ)

**להרצת כל הבדיקות:**
1. פתח את Android Studio
2. לחץ ימני על התיקייה `androidTest`
3. בחר **Run 'Tests in 'androidTest''**

**להרצת קובץ בדיקה ספציפי:**
1. פתח את הקובץ (למשל `NavigationTests.java`)
2. לחץ על החץ הירוק ליד שם הקלאס
3. בחר **Run 'NavigationTests'**

**להרצת בדיקה בודדת:**
1. פתח את הקובץ
2. לחץ על החץ הירוק ליד שם המתודה (למשל `testNavigateToTeams`)
3. בחר **Run 'testNavigateToTeams()'**

#### דרך 2: שורת פקודה (Terminal)

**להרצת כל הבדיקות:**
```bash
./gradlew connectedAndroidTest
```

**להרצת קלאס בדיקה ספציפי:**
```bash
./gradlew connectedAndroidTest -Pandroid.testInstrumentationRunnerArguments.class=com.example.testapp.NavigationTests
```

**להרצת בדיקה בודדת:**
```bash
./gradlew connectedAndroidTest -Pandroid.testInstrumentationRunnerArguments.class=com.example.testapp.NavigationTests#testNavigateToTeams
```

---

### דרישות להרצת הבדיקות

⚠️ **חשוב מאוד - יש לבצע לפני הרצת הבדיקות:**

1. **משתמש מחובר (קריטי!):**
   - **לפני הרצת הבדיקות, התחבר למערכת באמצעות האפליקציה**
   - פתח את האפליקציה על המכשיר/אמולטור
   - התחבר עם משתמש קיים
   - **השאר את האפליקציה במסך הבית**
   - רק אז הרץ את הבדיקות
   - הסיבה: Firebase Authentication דורש משתמש מחובר כדי לגשת ל-MainActivity

2. **מכשיר או אמולטור:**
   - חבר מכשיר Android פיזי או
   - הפעל אמולטור Android
   - **⚠️ דרישה חשובה: API 30-34 (Android 11-14) בלבד**
   - **API 35+ (Android 15+) אינו נתמך כרגע על ידי Espresso 3.6.1**
   - אם יש לך רק אמולטור API 36, צור אמולטור חדש עם API 34:
     * Android Studio → Device Manager → Create Device
     * בחר מכשיר → Next
     * בחר **API Level 34 (UpsideDownCake)** → Next → Finish

3. **נתונים במערכת (אופציונלי):**
   - לבדיקות מסוימות נדרשים נתונים (קבוצות, מגרשים, אימונים)
   - ניתן ליצור נתונים דמה דרך האפליקציה

**שלבים מומלצים להרצת בדיקות:**
1. פתח את האפליקציה במכשיר
2. התחבר עם המשתמש שלך
3. וודא שאתה במסך הבית (מסך עם הכרטיסים)
4. **אל תסגור את האפליקציה**
5. הרץ את הבדיקות מ-Android Studio או Terminal
6. הבדיקות יפעילו מחדש את MainActivity עם המשתמש המחובר

---

### תוצאות הבדיקות

**Android Studio:**
- תוצאות מוצגות בחלונית "Run" בתחתית המסך
- בדיקה שעברה: ✅ (ירוק)
- בדיקה שנכשלה: ❌ (אדום)

**Terminal:**
```
> Task :app:connectedDebugAndroidTest
Starting 4 tests on Pixel_3a_API_30(AVD) - 11

com.example.testapp.NavigationTests > testNavigateToTeams PASSED
com.example.testapp.NavigationTests > testNavigateToCourts PASSED
...

BUILD SUCCESSFUL
```

**דוח HTML:**
תוצאות מפורטות נמצאות ב:
```
app/build/reports/androidTests/connected/index.html
```

---

## 2. בדיקות ידניות (Manual Tests)

### קובץ תוכנית הבדיקות
המסמך נמצא ב:
```
TEST_PLAN.md
```

### מבנה המסמך

המסמך כולל **40+ תסריטי בדיקה** מפורטים:

#### קטגוריות:
1. **בדיקת ניווט** (5 בדיקות)
   - ניווט בין מסכים
   - ניווט חזרה

2. **בדיקת קבוצות** (6 בדיקות)
   - צפייה, הוספה, עריכה, מחיקה
   - פילטרים, שיוך מאמנים

3. **בדיקת מגרשים** (4 בדיקות)
   - צפייה, הוספה, עריכה, מחיקה

4. **בדיקת אימונים** (8 בדיקות)
   - צפייה, הוספה, עריכה, מחיקה, שכפול
   - פילטרים (קבוצה, יום, מיקום)

5. **בדיקת ניהול משתמשים** (5 בדיקות)
   - גישה, פילטרים, שינוי הרשאות, מחיקה

6. **בדיקת פרטי שחקן** (6 בדיקות)
   - מילוי טופס, עריכה, תאריכים, מידות

7. **בדיקות כלליות** (5 בדיקות)
   - יציאה מהמערכת
   - בדיקת הרשאות (שחקן, מאמן, רכז, מנהל)

---

### איך להשתמש בתוכנית הבדיקות?

#### שלב 1: הכנה
1. פתח את הקובץ `TEST_PLAN.md`
2. הדפס או שמור בפורמט PDF
3. הכן מכשיר בדיקה

#### שלב 2: הרצת הבדיקות
1. עבור על כל תסריט בדיקה לפי הסדר
2. בצע את הצעדים המפורטים
3. בדוק את התוצאה הצפויה
4. סמן את הסטטוס בטבלה:
   - ✅ עבר בהצלחה
   - ❌ נכשל
   - ⚠️ עבר עם הערות

#### שלב 3: תיעוד
1. מלא את פרטי סביבת הבדיקה (מכשיר, תאריך, בודק)
2. תעד באגים שנמצאו בטבלה
3. רשום המלצות לשיפור

---

### דוגמה לתסריט בדיקה

```markdown
### 1.1 ניווט למסך קבוצות
**צעדים:**
1. התחבר למערכת
2. במסך הבית, לחץ על כרטיס "קבוצות"
3. וודא שהמסך עבר לדף הקבוצות

**תוצאה צפויה:**
- ✅ המסך מציג את רשימת הקבוצות
- ✅ הכותרת משתנה ל-"קבוצות"
- ✅ כפתור "חזור" מופיע בטולבר
```

---

## 3. משתמשי בדיקה מומלצים

כדי לבדוק את כל ההרשאות, יש ליצור 4 משתמשים:

### משתמש 1: שחקן
- **תפקיד:** PLAYER
- **גישה:** קבוצות, מגרשים, אימונים (צפייה בלבד), הפרטים שלי

### משתמש 2: מאמן
- **תפקיד:** COACH
- **גישה:** קבוצות, מגרשים, אימונים (ניהול של הקבוצה שלו), תצוגת מגרשים

### משתמש 3: רכז
- **תפקיד:** COORDINATOR
- **גישה:** כל המסכים כולל ניהול משתמשים (ניהול מלא)

### משתמש 4: מנהל
- **תפקיד:** ADMIN
- **גישה:** כל המסכים כולל ניהול משתמשים (ניהול מלא + שינוי הרשאות)

---

## 4. בדיקות לפי תפקיד

### בדיקות שחקן
```
✓ 1.1-1.5 - ניווט
✓ 2.1-2.2 - קבוצות (צפייה)
✓ 3.1 - מגרשים (צפייה)
✓ 4.1-4.4 - אימונים (צפייה + פילטרים)
✓ 6.1-6.6 - פרטי שחקן
✓ 7.2 - הרשאות שחקן
```

### בדיקות מאמן
```
✓ 1.1-1.5 - ניווט
✓ 2.1-2.2 - קבוצות (צפייה)
✓ 3.1 - מגרשים (צפייה)
✓ 4.1-4.8 - אימונים (ניהול מלא)
✓ 7.3 - הרשאות מאמן
```

### בדיקות רכז/מנהל
```
✓ כל הבדיקות (1.1-7.5)
```

---

## 5. Troubleshooting

### הבדיקות האוטומטיות נכשלות?

**בעיה: "No connected devices"**
```
פתרון:
1. וודא שמכשיר/אמולטור מחובר
2. הרץ: adb devices
3. אם אין מכשירים, הפעל אמולטור
```

**בעיה: "Test failed: Could not find element"**
```
פתרון:
1. וודא שאתה מחובר למערכת
2. המתן לטעינת הנתונים
3. בדוק שיש נתונים במערכת (קבוצות, מגרשים וכו')
```

**בעיה: "Test compilation failed"**
```
פתרון:
1. Sync Project with Gradle Files
2. Clean Project
3. Rebuild Project
```

---

### הבדיקות הידניות לא עובדות?

**בעיה: כרטיסים לא מוצגים**
```
פתרון:
1. בדוק את תפקיד המשתמש
2. וודא שהתחברת כמשתמש הנכון
3. התנתק והתחבר מחדש
```

**בעיה: "אין לך הרשאה"**
```
פתרון:
1. בדוק שהמשתמש שלך הוא מנהל/רכז
2. פנה למנהל המערכת לשינוי הרשאות
```

---

## 6. סיכום

### תסריטי הבדיקה מכסים:
- ✅ ניווט בין מסכים
- ✅ פונקציונליות קבוצות
- ✅ פונקציונליות מגרשים
- ✅ פונקציונליות אימונים
- ✅ ניהול משתמשים
- ✅ עריכת פרטי שחקן
- ✅ בדיקות הרשאות
- ✅ בדיקות כלליות

### סך הכל:
- **40+ תסריטי בדיקה ידניים**
- **15+ בדיקות אוטומטיות**
- **כיסוי מלא** של כל הפיצ'רים במערכת

---

## 7. תכנון בדיקות לגרסאות עתידיות

### אסטרטגיית בדיקות לגרסה 3.0+

כאשר תכונות חדשות יתווספו, יש להוסיף:

**בדיקות אוטומטיות (Espresso):**
- בדיקות UI לכל מסך חדש
- בדיקות integration בין רכיבים
- בדיקות regression לתכונות קיימות

**בדיקות ידניות:**
- תסריטי בדיקה מפורטים (ראה TEST_PLAN.md)
- בדיקות exploratory
- בדיקות acceptance עם משתמשי קצה

**בדיקות נוספות נדרשות:**
- בדיקות ביצועים (Performance)
- בדיקות אבטחה (Security)
- בדיקות נגישות (Accessibility)
- בדיקות תאימות למכשירים (Compatibility)

### אזורי בדיקה חשובים לגרסאות הבאות:

**משחקים ותורנויות (v3.5):**
- בדיקות מניעת התנגשויות
- בדיקות שיוך תורנויות
- בדיקות הסעות

**נוכחות ודיווח (v4.0):**
- בדיקות רישום נוכחות
- בדיקות הפקת דוחות
- בדיקות ייצוא ושליחת מיילים

**מערכת רב-אגודתית (v5.0):**
- בדיקות הפרדת נתונים
- בדיקות הרשאות מתקדמות
- בדיקות ביצועים עם נתונים רבים

**iOS ו-Web (v6.0):**
- בדיקות cross-platform
- בדיקות סנכרון בין פלטפורמות
- בדיקות responsive design

---

## 8. תמיכה

אם יש בעיות או שאלות:
1. בדוק את `TEST_PLAN.md` לפרטים מלאים
2. בדוק את קוד הבדיקות ב-`androidTest/`
3. פנה למפתח המערכת

---

**תאריך יצירה:** ינואר 2026  
**תאריך עדכון:** ינואר 2026  
**גרסה:** 2.0
